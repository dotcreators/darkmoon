generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Artist {
  id                          String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  username                    String
  userId                      String           @unique(map: "artists_userid_key")
  tweetsCount                 Int
  followersCount              Int
  images                      Json             @db.Json
  name                        String?
  website                     String?
  country                     String?
  tags                        String[]
  bio                         String?
  url                         String
  joinedAt                    DateTime         @db.Timestamptz(6)
  createdAt                   DateTime         @default(now()) @db.Timestamptz(6)
  lastUpdatedAt               DateTime         @default(now()) @db.Timestamptz(6)
  weeklyFollowersGrowingTrend Float            @default(0) @db.Real
  weeklyPostsGrowingTrend     Float            @default(0) @db.Real
  artistsTrending             ArtistTrending[]

  @@map("artists")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model ArtistSuggestion {
  requestId     String   @id(map: "artistsQueue_pkey") @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  username      String
  country       String?
  tags          String[]
  requestStatus String   @default("requested")
  createdAt     DateTime @default(now()) @db.Timestamptz(6)
  avatarUrl     String?

  @@map("artistsSuggestions")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model ArtistTrending {
  userId         String
  followersCount Int
  tweetsCount    Int
  recordedAt     DateTime? @default(now()) @db.Timestamptz(6)
  id             String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  artists        Artist    @relation(fields: [userId], references: [userId], onDelete: Cascade, onUpdate: NoAction)

  @@map("artistsTrending")
}
